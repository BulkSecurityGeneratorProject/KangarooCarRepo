<div class="row" id="newPage">
    <div class="col-md-8 col-md-offset-2 list-group removePaddingWhenSmall">
        <h2 class="list-group-item active smallerText" ng-show="!success">Registration</h2>
        <h2 class="list-group-item active smallerText" ng-show="success">Registration confirmation</h2>
        <form class="list-group-item ng-show="!success" name="form" role="form" novalidate ng-submit="register()" show-validation>
		<div class="alert alert-success" ng-show="success" >
             <strong>Registration complete!</strong> Please check your email for confirmation.
         </div>
         <div class="alert alert-danger" ng-show="error">
             <strong>Registration failed!</strong> Please check your input and try again.
         </div>
         <div class="alert alert-danger" ng-show="errorUserExists">
             <strong>User name already registered!</strong> Please choose another one.
         </div>
         <div class="alert alert-danger" ng-show="errorEmailExists">
             <strong>E-mail is already in use!</strong> Please choose another one.
         </div>
         <div class="alert alert-danger" ng-show="errorCapatcha">
             <strong>Prove you are not a robot</strong>
         </div>
         <div class="alert alert-danger" ng-show="doNotMatch">
             The password and its confirmation do not match!
         </div>
         
		<div class="list-group" ng-show="!success">
			<h3 class="list-group-item active smallerText">User Details</h3>
		</div>
			<div class="form-group" ng-show="!success">
				<label>User Type&#xA0;&#xA0;</label>
				<div id="radioBtn" class="btn-group">
					<a class="btn btn-primary btn-sm active" name="optradio" data-toggle="user" data-title="driver" 
						ng-click="isDriver = true; userType = 'driver'" checked>Driver</a>
					<a class="btn btn-primary btn-sm notActive" name="optradio" data-toggle="user" data-title="passenger" 
						ng-click="isDriver = false; userType = 'passenger'">Passenger</a>
				</div>
			</div>
            <div class="form-group" ng-show="!success">
            	<label>User Name</label>
                <input type="text" class="form-control" name="login" placeholder="{{'global.form.username.placeholder' | translate}}"
                       ng-model="registerAccount.login" ng-minlength=1 ng-maxlength=50 ng-pattern="/^[a-zA-Z0-9]*$/" required>
                <div ng-show="form.login.$dirty && form.login.$invalid">
                    <p class="help-block" ng-show="form.login.$error.required" >
                        Your user name is required.
                    </p>
                    <p class="help-block" ng-show="form.login.$error.minlength" >
                        Your user name is required to be at least 1 character
                    </p>
                    <p class="help-block" ng-show="form.login.$error.maxlength" >
                        Your user name cannot be longer than 50 characters
                    </p>
                    <p class="help-block" ng-show="form.login.$error.pattern" >
                        Your user name can only contain upper/lower case letters and digits
                	</p>
                </div>
            </div>
            
            <div class="form-group" ng-show="!success">
                <label translate="global.form.email">E-mail</label>
                <input type="email" class="form-control" name="email" placeholder="{{'global.form.email.placeholder' | translate}}"
                       ng-model="registerAccount.email" ng-minlength=5 ng-maxlength=100 required>
                <div ng-show="form.email.$dirty && form.email.$invalid">
                    <p class="help-block" ng-show="form.email.$error.required" translate="global.messages.validate.email.required">
                        Your e-mail is required.
                    </p>
                    <p class="help-block" ng-show="form.email.$error.email" translate="global.messages.validate.email.invalid">
                        Your e-mail is invalid.
                    </p>
                    <p class="help-block" ng-show="form.email.$error.minlength" translate="global.messages.validate.email.minlength">
                        Your e-mail is required to be at least 5 characters
                    </p>
                    <p class="help-block" ng-show="form.email.$error.maxlength" translate="global.messages.validate.email.maxlength">
                        Your e-mail cannot be longer than 100 characters
                    </p>
                </div>
            </div>
            <div class="form-group" ng-show="!success">
                <label translate="global.form.newpassword">New password</label>
                <input type="password" class="form-control" name="password" placeholder="{{'global.form.newpassword.placeholder' | translate}}"
                       ng-model="registerAccount.password" ng-minlength=5 ng-maxlength=50 required>
                <div ng-show="form.password.$dirty && form.password.$invalid">
                    <p class="help-block"
                           ng-show="form.password.$error.required" translate="global.messages.validate.newpassword.required">
                        Your password is required.
                    </p>
                    <p class="help-block"
                           ng-show="form.password.$error.minlength" translate="global.messages.validate.newpassword.minlength">
                        Your password is required to be at least 5 characters
                    </p>
                    <p class="help-block"
                           ng-show="form.password.$error.maxlength" translate="global.messages.validate.newpassword.maxlength">
                        Your password cannot be longer than 50 characters
                    </p>
                </div>
                <password-strength-bar password-to-check="registerAccount.password"></password-strength-bar>
            </div>
            <div class="form-group" ng-show="!success">
                <label translate="global.form.confirmpassword">New password confirmation</label>
                <input type="password" class="form-control" name="confirmPassword" placeholder="{{'global.form.confirmpassword.placeholder' | translate}}"
                       ng-model="confirmPassword" ng-minlength=5 ng-maxlength=50 required>
                <div ng-show="form.confirmPassword.$dirty && form.confirmPassword.$invalid">
                    <p class="help-block"
                           ng-show="form.confirmPassword.$error.required" translate="global.messages.validate.confirmpassword.required">
                        Your password confirmation is required.
                    </p>
                    <p class="help-block"
                           ng-show="form.confirmPassword.$error.minlength" translate="global.messages.validate.confirmpassword.minlength">
                        Your password confirmation is required to be at least 5 characters
                    </p>
                    <p class="help-block"
                           ng-show="form.confirmPassword.$error.maxlength" translate="global.messages.validate.confirmpassword.maxlength">
                        Your password confirmation cannot be longer than 50 characters
                    </p>
                </div>
            </div>
            <div class="form-group list-group" ng-switch="isDriver" ng-show="!success">
            	<h3 ng-switch-when="true" class="list-group-item active smallerText">Car Details</h3>&#xA0;
            	<div class="row" ng-switch-when="true">
            		<div class="col-sm-5">
            			<label>Make</label>
		              	<select class="form-control" name="make" ng-model="car.make" ng-minlength=1 required ng-change="getModels(car.make)">
			        		<option value="" disabled selected>Select make</option>
			        		<option ng-repeat="make in makes" value="{{make.id}}">{{make.make}}</option>
			        	</select>
					</div>              
	              	<div class="col-sm-5">
	              		<label>Model</label>
	              		<select class="form-control" name="model" ng-model="car.model" ng-minlength=1 required>
		        			<option value="" disabled selected>Select model</option>
		        			<option ng-repeat="model in models" value="{{model.id}}">{{model.model}}</option>
		        		</select>
	              	</div>              
              		<div class="col-sm-2">
              			<label>Year</label>
              			<select class="form-control" name="model" ng-model="car.year" ng-minlength=1 required>
        					<option value="" disabled selected>Year</option>
        					<option ng-repeat="year in years" value="{{year}}">{{year}}</option>
        				</select>
              		</div>
             	</div>             
			</div>	
	        <div ng-show="!success" class="g-recaptcha" data-sitekey="6LfBtgkTAAAAAKOP9PcOAi199gQBQzqDqcr5LUeu"></div><br>	        
            <button type="submit" ng-disabled="form.$invalid" ng-show="!success" class="btn btn-primary" translate="register.form.button">Register</button>
            <button  ng-show="success" ui-sref="home" class="btn btn-primary">GO to home page</button>
        </form>
        
        <p></p>
    </div>
</div>
 <script src="https://www.google.com/recaptcha/api.js?"></script>

